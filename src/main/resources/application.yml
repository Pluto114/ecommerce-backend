# ?????
server:
  port: 8080 # ????????

# Spring ????
spring:
  application:
    name: mall-backend # ????


  mail:
      # QQ 邮箱的 SMTP 服务器地址
      host: smtp.qq.com
      # 端口：QQ邮箱 SSL 用 465，TLS 用 587。这里推荐用默认自动适配，或者显式指定 587
      port: 587
      # 读取环境变量
      username: ${MAIL_USER}
      password: ${MAIL_PASS}
      default-encoding: UTF-8
      properties:
        mail:
          smtp:
            auth: true
            starttls:
              enable: true
              required: true
  # 1. ??????? (DataSource)

  datasource:
    # 动态 URL：
    # 1. 本地运行时：默认连接 localhost:3306/mall_db，SSL 关闭
    # 2. 云端运行时：通过环境变量自动切换 IP、端口、库名，并开启 SSL
    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:mall_db}?serverTimezone=Asia/Shanghai&useUnicode=true&characterEncoding=utf-8&useSSL=${DB_SSL:false}
    
    # 动态账号密码：
    # 部署时会读取 DB_USER 和 DB_PASS 变量，读不到则用后面的默认值（你本地的账号密码）
    username: ${DB_USER:root}
    password: ${DB_PASS:Zhaojerry331!}
    
    driver-class-name: com.mysql.cj.jdbc.Driver

  # 2. Redis ?? (???? i)
  data:
    redis:
      host: localhost
      port: 6379
      password:
      database: 0

# 3. MyBatis-Plus ??
mybatis-plus:
  global-config:
    db-config:
      # ??????
      id-type: auto
  # ?? Mapper.xml ??
  mapper-locations: classpath:/mapper/*.xml
  # ????????
  configuration:
    map-underscore-to-camel-case: true

# 4. Knife4j ?? (???? b)
knife4j:
  enable: true # ?? Knife4j
  setting:
    # ??????
    title: "??????? - API??"
    description: "VUE+Spring Boot ?????"
    author: "??"
    version: "v1.0.0"
# SpringDoc (Knife4j) API ????
# SpringDoc (Knife4j) API 文档
springdoc:
  packages-to-scan:
    - com.sc.mall.controller

# ==========================================
# 5. 阿里云 OSS 配置
# 注意：必须顶格写，不能在 springdoc 下面
# ==========================================
aliyun:
  oss:
    # 建议 endpoint 带协议，例如：https://oss-cn-beijing.aliyuncs.com
    endpoint: ${OSS_ENDPOINT}
    accessKeyId: ${OSS_ACCESS_KEY_ID}
    accessKeySecret: ${OSS_ACCESS_KEY_SECRET}
    bucketName: ${OSS_BUCKET_NAME}
    # 可选：自定义域名
    publicDomain: ${OSS_PUBLIC_DOMAIN:}

